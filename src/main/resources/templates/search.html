<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Revivre l'évènement: Recherche</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="../css/search.css"/>
        <!-- Il est connecté au map.css car les 2 doivent avoir le footer en bas de page forcé 
        car pas assez de contenu dans la page pour l'y mettre de base.-->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"/>
        <link rel="icon" href="../images/logo_icon.ico"/>
        
    </head>
    <body>
        <header>
            <div class="bg-dark container-fluid">
                <div class="row ">
                    <div class="col-12">
                        <nav class= "navbar navbar-expand-md navbar-dark " id="lien_top_right">
                            <a class="navbar-brand" th:href="@{/}" href="#"><img id="logo" src="../images/header/logo_v1.png" alt="logo_v1.png" /></a>
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div id="navbarContent" class="collapse navbar-collapse row">
                                <div class="col-12">   
                                    <ul class="navbar-nav mr-auto justify-content-around">
                                        <li class="nav-item active "><a id="Accueil" class="nav-link " th:href="@{/}" href="#">Accueil</a></li>
                                        <li class="nav-item active "><a id="Contribuer" class="nav-link" th:href="@{/contribuer}">Contribuer</a></li>
                                        <li class="nav-item active "><a id="Hasard" class="nav-link" th:href="@{/eventRandom}">Évènement au hasard</a></li>
                                        <li class="nav-item active "><a th:href="@{/search}" id="recherche" class="nav-link text-light text-decoration-none">Rechercher un évènement</a></li>
                                    </ul>
                                </div>    
                            </div>
                                                  
                           <!-- <button id="affichage" ><img id="mode" src="../images/header/mini_mode_jour.jpg" alt="mode jour/nuit"/></button>-->
                        </nav>
                    </div>
                </div>
            </div>
        </header>
        <main>
            <div class="bg-light">
                <div class="container">
                    <div id="rechercher"class="row">
                        <!-- SI MODIF, PENSER A MODIFIER LE FICHIER JS -->
                        <div id="espace_mot_cle" class="col">
                            <div class="card">
                                <div class="card-body">
                                    <div class="row " >
                                        <div class="col-12 col-md-6">
                                            <h5 class="card-title "> Rechercher un évènement
                                            </h5>
                                            <div >
                                                <form th:action="@{/recherches/fctSearch}" method="get">
                                                    <label for=motCle>Mot-clé : </label>
                                                    <input id=rechercheMot type=text name="motCle" th:value="${motCle}"/><br/>
                                                    <input class="btn-rechercher" type=submit value="Recherche par mot-clé" />
                                                </form>
                                            </div>
                                        </div>
                                        <div class="emplacementRecherche card-text col-12 col-md-6"> 
                                            <div class="row">
                                                <div class="col-6">
                                                    <input  id="lieu" type="button" value="Par lieu"/>
                                                </div>
                                                <div class="col-6">
                                                    <input id="date" type="button" value="Par date"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id=espace_lieu_1 class=col-md-6 col-12> <!--Caché-->
                        <div class=card>
                            <div class=card-body>
                                <h5 class=card-title> Rechercher un évènement par son lieu</h5>
                                <div class=emplacementRecherche card-text >
                                        <form id=formulaire >
                                            <label for=pays>Pays : </label><input id=recherchePays type=text /><br/>
                                            <label for=ville>Ville : </label><input id=rechercheVille type=text /><br/>
                                            <label for=adresse>Adresse : </label><input id=rechercheAdresse type=text /><br/>
                                            <input class="btn-rechercher" type=submit value=Recherche />
                                        </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id=espace_lieu_2 class=col-md-6 col-12 > <!--Caché-->
                        <div class=card>
                            <div class=card-body>
                                <h5 class=card-title> Rechercher un évènement par ses coordonnées</h5>
                                <div class=emplacementRecherche card-text >
                                    <form id=formulaire>
                                        <label for=latitude>Latitude : </label><input id=rechercheLatitude type=text /><br/>
                                        <label for=longitude>Longitude : </label><input id=rechercheLongitude type=text /><br/>
                                        <input class="btn-rechercher" type=submit value=Recherche />
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id=espace_date class=col-12 > <!--Caché-->
                        <div class=card>
                            <div class=card-body>
                                <h5 class=card-title> Rechercher un évènement par sa date</h5>
                                <div class=emplacementRecherche card-text > 
                                        <form id=formulaire >
                                            <label for=annee>Année : </label><input id=rechercheAnnée type=number min="2000" max="2021"/><br/>
                                            <label for=mois>Mois : </label><select name="mois" id="mois">
                                            <option value="">--Choissiez un mois--</option>
                                            <option value="01"> Janvier </option>
                                            <option value="02"> Février </option>
                                            <option value="03"> Mars </option>
                                            <option value="04"> Avril</option>
                                            <option value="05"> Mai </option>
                                            <option value="06"> Juin </option>
                                            <option value="07"> Juillet </option>
                                            <option value="08"> Août </option>
                                            <option value="09"> Septembre </option>
                                            <option value="10"> Octobre </option>
                                            <option value="11"> Novembre </option>
                                            <option value="12"> Décembre </option></select><br/>
                                            <label for=jour>Jour : </label><input id=rechercheJour type=number min="1" max="31"/><br/>
                                             <input class="btn-rechercher" type=submit value=Recherche />
                                        </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="btn-retour">Retour</button> <!--Caché-->
                    </div>
                    <!--ICI-->
                    <div id="resultats" class="row">
                        <!-- Lieu dédié à l'affichage de résultats.-->
                        <!--Les recherches par mot clé (si le boolean est vrai, les éléments HTML sont appliqués)-->
                        <div th:if="${recherche_par_mot_cle}">
                            <h3 th:if="${!isValide}">Veuillez saisir un mot clé</h3>
                            <div th:unless="${!isValide}">
                                <div th:if="${trouves}">
                                    <h3>Résultats pour "[[${motCle}]]" :</h3><br/>
                                    <table>
                                            <tr>
                                                <th>Nom de l'évènement</th><th>Description</th><th>Lieu</th><th>Date de début</th><th>Date de fin</th>
                                            </tr>
                                            <tr th:each="r:${results}">
                                                <td ><a th:text="${r.nomEvenement}" th:href="@{/recherches/eventWikiPage(id=${r.id})}"></a></td>
                                                <!--<td th:text="${e.description}"></td>-->
                                                <td><a th:text="${r.lieu}"></a></td>
                                                <td th:text="${#temporals.format(r.dateDebut, 'dd/MM/yyyy')}"></td>
                                                <td th:text="${#temporals.format(r.dateFin, 'dd/MM/yyyy')}"></td>
                                            </tr>
                                    </table>
                                </div>
                                <div th:unless="${trouves}">
                                    <h3>Aucun résultats trouvés pour "[[${motCle}]]"</h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer>
            <div class="bg-light">
		<div class="container">
                    <div class="row">
                        <div class="col">
                            <ul class="list-inline text-center">
                                <li class="list-inline-item text-primary">A propos</li>
                                <li class="list-inline-item text-primary">© Revivre l'évènement</li>
                            </ul>
                        </div>
                    </div>
		</div>
            </div>
        </footer>
        
        <script src="../javascript/search.js"></script>
        
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>

        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    
    </body>
</html>